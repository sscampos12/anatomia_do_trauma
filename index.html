<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simula√ß√£o Avan√ßada: Trauma, C√©rebro e Corpo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 30%, #16213e 70%, #0f3460 100%);
            color: #F9FAFB;
            min-height: 100vh;
        }
        .glass-panel {
            background: rgba(17, 24, 39, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }
        #simulation-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin: auto;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        #human-figure {
            width: 100%;
            height: auto;
            display: block;
        }
        #canvas-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }
        .control-btn {
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .control-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        .control-btn:active {
            transform: scale(0.98);
        }
        .reaction-item {
            transition: all 0.6s ease;
            opacity: 0;
            transform: translateY(20px);
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            margin-bottom: 10px;
            backdrop-filter: blur(10px);
        }
        .reaction-item.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .brain-legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }
        .brain-legend-item.active {
            background: rgba(255, 107, 107, 0.2);
            border-left: 3px solid #ff6b6b;
            transform: translateX(5px);
        }
        .brain-color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .glow-effect {
            box-shadow: 0 0 25px rgba(59, 130, 246, 0.6);
        }
        .brain-region {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .brain-region:hover {
            opacity: 0.9;
            filter: brightness(1.2);
        }
        .brain-region.highlighted {
            filter: drop-shadow(0 0 15px #ff6b6b) brightness(1.3);
            animation: brainPulse 1.5s infinite;
        }
        @keyframes brainPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }
        .trauma-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }
        .consequences-section {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }
        .consequence-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 8px;
            padding: 6px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
        }
        .timeline-section {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }
        .timeline-item {
            margin-bottom: 12px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid;
        }
        .timeline-immediate {
            border-left-color: #ef4444;
        }
        .timeline-short {
            border-left-color: #f59e0b;
        }
        .timeline-long {
            border-left-color: #8b5cf6;
        }
        .bible-section {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
        }
        .bible-verse {
            font-style: italic;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            border-left: 4px solid #22c55e;
            margin-bottom: 8px;
        }
        @media (max-width: 768px) {
            .trauma-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-8xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-7xl font-black text-white uppercase tracking-widest mb-4 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent">
                Anatomia do Trauma
            </h1>
            <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
                Simula√ß√£o cient√≠fica avan√ßada das respostas neurol√≥gicas e fisiol√≥gicas a diferentes tipos de feridas emocionais
            </p>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-5 gap-8">
            
            <!-- √Årea de Simula√ß√£o -->
            <div class="xl:col-span-2 flex items-center justify-center">
                <div id="simulation-container">
                    <!-- SVG da figura humana melhorada -->
                    <svg id="human-figure" viewBox="0 0 500 700" xmlns="http://www.w3.org/2000/svg">
                        <!-- Fundo com gradiente -->
                        <rect width="500" height="700" fill="url(#bodyGradient)"/>
                        
                        <!-- Defini√ß√µes -->
                        <defs>
                            <linearGradient id="bodyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#0a0a0f;stop-opacity:1" />
                                <stop offset="50%" style="stop-color:#1a1a2e;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
                            </linearGradient>
                            <radialGradient id="brainGlow" cx="50%" cy="50%" r="60%">
                                <stop offset="0%" style="stop-color:#ff6b6b;stop-opacity:0.3" />
                                <stop offset="100%" style="stop-color:#transparent;stop-opacity:0" />
                            </radialGradient>
                            <filter id="glow">
                                <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                                <feMerge> 
                                    <feMergeNode in="coloredBlur"/>
                                    <feMergeNode in="SourceGraphic"/>
                                </feMerge>
                            </filter>
                        </defs>
                        
                        <!-- Cabe√ßa com mais detalhes -->
                        <circle cx="250" cy="120" r="70" fill="#fdbcb4" stroke="#2d3748" stroke-width="3"/>
                        <circle cx="250" cy="120" r="65" fill="url(#brainGlow)" opacity="0.3"/>
                        
                        <!-- C√©rebro detalhado -->
                        <g id="brain" opacity="0.95">
                            <!-- C√≥rtex pr√©-frontal -->
                            <ellipse cx="220" cy="95" rx="25" ry="18" fill="#ff6b6b" opacity="0.8" class="brain-region" data-region="pfc" data-name="C√≥rtex Pr√©-frontal"/>
                            
                            <!-- Am√≠gdala (esquerda e direita) -->
                            <circle cx="235" cy="120" r="14" fill="#ff4757" opacity="0.9" class="brain-region" data-region="amygdala" data-name="Am√≠gdala"/>
                            <circle cx="265" cy="120" r="14" fill="#ff4757" opacity="0.9" class="brain-region" data-region="amygdala" data-name="Am√≠gdala"/>
                            
                            <!-- Hipocampo -->
                            <ellipse cx="270" cy="125" rx="18" ry="10" fill="#ff3742" opacity="0.8" class="brain-region" data-region="hippocampus" data-name="Hipocampo"/>
                            <ellipse cx="230" cy="125" rx="18" ry="10" fill="#ff3742" opacity="0.8" class="brain-region" data-region="hippocampus" data-name="Hipocampo"/>
                            
                            <!-- C√≥rtex cingulado anterior -->
                            <ellipse cx="250" cy="110" rx="15" ry="8" fill="#ff9ff3" opacity="0.8" class="brain-region" data-region="acc" data-name="C√≥rtex Cingulado"/>
                            
                            <!-- T√°lamo -->
                            <circle cx="250" cy="130" r="8" fill="#a855f7" opacity="0.8" class="brain-region" data-region="thalamus" data-name="T√°lamo"/>
                            
                            <!-- Tronco cerebral -->
                            <rect x="245" y="145" width="10" height="25" fill="#ff5722" opacity="0.9" class="brain-region" data-region="brainstem" data-name="Tronco Cerebral"/>
                            
                            <!-- Cerebelo -->
                            <circle cx="280" cy="150" r="12" fill="#ffa726" opacity="0.8" class="brain-region" data-region="cerebellum" data-name="Cerebelo"/>
                            <circle cx="220" cy="150" r="12" fill="#ffa726" opacity="0.8" class="brain-region" data-region="cerebellum" data-name="Cerebelo"/>
                        </g>
                        
                        <!-- Pesco√ßo -->
                        <rect x="225" y="190" width="50" height="35" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        
                        <!-- Tronco melhorado -->
                        <rect x="175" y="225" width="150" height="200" rx="30" fill="#87ceeb" stroke="#2d3748" stroke-width="3"/>
                        
                        <!-- Sistema cardiovascular -->
                        <g id="cardiovascular-system">
                            <!-- Cora√ß√£o detalhado -->
                            <path d="M 220 270 C 220 255, 245 255, 245 270 C 245 255, 270 255, 270 270 C 270 290, 245 320, 245 320 C 245 320, 220 290, 220 270 Z" 
                                  fill="#ff6b6b" stroke="#2d3748" stroke-width="2" opacity="0.9" class="body-part" data-region="heart"/>
                            <!-- Art√©rias principais -->
                            <path d="M 245 270 Q 200 280 180 300" stroke="#ff4757" stroke-width="4" fill="none" opacity="0.6"/>
                            <path d="M 245 270 Q 290 280 320 300" stroke="#ff4757" stroke-width="4" fill="none" opacity="0.6"/>
                        </g>
                        
                        <!-- Sistema digestivo -->
                        <g id="digestive-system">
                            <!-- Est√¥mago -->
                            <ellipse cx="250" cy="350" rx="40" ry="25" fill="#ffa500" stroke="#2d3748" stroke-width="2" opacity="0.9" class="body-part" data-region="stomach"/>
                            <!-- Intestinos -->
                            <ellipse cx="250" cy="390" rx="35" ry="20" fill="#ffb74d" stroke="#2d3748" stroke-width="2" opacity="0.7"/>
                        </g>
                        
                        <!-- Bra√ßos com mais detalhes -->
                        <rect x="100" y="240" width="75" height="25" rx="12" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        <rect x="325" y="240" width="75" height="25" rx="12" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        <rect x="110" y="265" width="25" height="100" rx="12" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        <rect x="365" y="265" width="25" height="100" rx="12" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        
                        <!-- M√£os -->
                        <circle cx="122" cy="375" r="18" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        <circle cx="378" cy="375" r="18" fill="#fdbcb4" stroke="#2d3748" stroke-width="2"/>
                        
                        <!-- Pernas -->
                        <rect x="200" y="425" width="30" height="150" rx="15" fill="#4169e1" stroke="#2d3748" stroke-width="2"/>
                        <rect x="270" y="425" width="30" height="150" rx="15" fill="#4169e1" stroke="#2d3748" stroke-width="2"/>
                        
                        <!-- P√©s -->
                        <ellipse cx="215" cy="585" rx="25" ry="15" fill="#8b4513" stroke="#2d3748" stroke-width="2"/>
                        <ellipse cx="285" cy="585" rx="25" ry="15" fill="#8b4513" stroke="#2d3748" stroke-width="2"/>
                        
                        <!-- √Åreas para efeitos especiais -->
                        <ellipse cx="250" cy="70" rx="30" ry="12" fill="transparent" class="body-part" data-region="forehead"/>
                        <rect x="350" y="290" width="35" height="18" fill="transparent" class="body-part" data-region="arm"/>
                        <circle cx="250" cy="300" r="20" fill="transparent" class="body-part" data-region="chest"/>
                    </svg>
                    
                    <canvas id="canvas-overlay"></canvas>
                </div>
            </div>

            <!-- Painel de Controles -->
            <div class="xl:col-span-1 flex flex-col gap-6">
                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <h2 class="text-2xl font-bold text-white mb-6">Tipos de Trauma</h2>
                    <div class="trauma-grid">
                        <button data-trauma="rejection" class="control-btn bg-red-600 hover:bg-red-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üö´ Rejei√ß√£o
                        </button>
                        <button data-trauma="abandonment" class="control-btn bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üíî Abandono
                        </button>
                        <button data-trauma="humiliation" class="control-btn bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üòî Humilha√ß√£o
                        </button>
                        <button data-trauma="guilt" class="control-btn bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üò∞ Culpa
                        </button>
                        <button data-trauma="anxiety" class="control-btn bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üò® Ansiedade
                        </button>
                        <button data-trauma="depression" class="control-btn bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üòû Depress√£o
                        </button>
                        <button data-trauma="anger" class="control-btn bg-orange-600 hover:bg-orange-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üò° Raiva
                        </button>
                        <button data-trauma="fear" class="control-btn bg-pink-600 hover:bg-pink-500 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üò± Medo
                        </button>
                        <button data-trauma="complex" class="control-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-2 rounded-lg text-xs">
                            üåÄ Complexo
                        </button>
                    </div>
                    <button id="resetBtn" class="control-btn w-full bg-gray-600 hover:bg-gray-500 text-white font-bold py-4 px-4 rounded-lg mt-6">
                        üîÑ Resetar Simula√ß√£o
                    </button>
                </div>
                
                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-white mb-4">√Årea Cerebral Ativa</h3>
                    <div id="brainLegend" class="space-y-2">
                        <div class="brain-legend-item" data-region="pfc">
                            <div class="brain-color-dot" style="background-color: #ff6b6b;"></div>
                            <span class="text-sm text-gray-300">C√≥rtex Pr√©-frontal</span>
                        </div>
                        <div class="brain-legend-item" data-region="amygdala">
                            <div class="brain-color-dot" style="background-color: #ff4757;"></div>
                            <span class="text-sm text-gray-300">Am√≠gdala</span>
                        </div>
                        <div class="brain-legend-item" data-region="hippocampus">
                            <div class="brain-color-dot" style="background-color: #ff3742;"></div>
                            <span class="text-sm text-gray-300">Hipocampo</span>
                        </div>
                        <div class="brain-legend-item" data-region="acc">
                            <div class="brain-color-dot" style="background-color: #ff9ff3;"></div>
                            <span class="text-sm text-gray-300">C√≥rtex Cingulado</span>
                        </div>
                        <div class="brain-legend-item" data-region="thalamus">
                            <div class="brain-color-dot" style="background-color: #a855f7;"></div>
                            <span class="text-sm text-gray-300">T√°lamo</span>
                        </div>
                        <div class="brain-legend-item" data-region="brainstem">
                            <div class="brain-color-dot" style="background-color: #ff5722;"></div>
                            <span class="text-sm text-gray-300">Tronco Cerebral</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-white mb-4">Rea√ß√µes Fisiol√≥gicas</h3>
                    <div id="reactionsPanel" class="space-y-2">
                        <p class="text-gray-400">Aguardando simula√ß√£o...</p>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-white mb-3">Intensidade do Trauma</h3>
                    <div class="w-full bg-gray-700 rounded-full h-4 mb-2">
                        <div id="traumaIntensity" class="bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 h-4 rounded-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                    <p id="intensityText" class="text-sm text-gray-400">N√≠vel: 0% - Sistema em equil√≠brio</p>
                </div>
            </div>

            <!-- Painel de Informa√ß√µes Expandido -->
            <div class="xl:col-span-2 flex flex-col gap-6">
                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <h3 class="text-xl font-bold text-white mb-3">An√°lise Neurol√≥gica</h3>
                    <p id="explanationText" class="text-gray-300 leading-relaxed text-sm">
                        O sistema nervoso est√° em homeostase. Selecione um tipo de trauma para observar como diferentes regi√µes cerebrais respondem e quais rea√ß√µes fisiol√≥gicas s√£o desencadeadas.
                    </p>
                    
                    <div id="consequencesSection" class="consequences-section" style="display: none;">
                        <h4 class="text-lg font-bold text-red-300 mb-3">‚ö†Ô∏è Consequ√™ncias das √Åreas Traumatizadas</h4>
                        <div id="consequencesList"></div>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <div id="timelineSection" class="timeline-section" style="display: none;">
                        <h4 class="text-lg font-bold text-blue-300 mb-3">‚è∞ Linha do Tempo das Consequ√™ncias</h4>
                        <div id="timelineList"></div>
                    </div>
                </div>

                <div class="glass-panel rounded-xl p-6 shadow-2xl">
                    <div id="bibleSection" class="bible-section" style="display: none;">
                        <h4 class="text-lg font-bold text-green-300 mb-3">üìñ Apoio B√≠blico e Esperan√ßa</h4>
                        <div id="bibleContent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas-overlay');
        const ctx = canvas.getContext('2d');
        const container = document.getElementById('simulation-container');
        const explanationText = document.getElementById('explanationText');
        const reactionsPanel = document.getElementById('reactionsPanel');
        const brainLegend = document.getElementById('brainLegend');
        const traumaIntensity = document.getElementById('traumaIntensity');
        const intensityText = document.getElementById('intensityText');
        const consequencesSection = document.getElementById('consequencesSection');
        const consequencesList = document.getElementById('consequencesList');
        const timelineSection = document.getElementById('timelineSection');
        const timelineList = document.getElementById('timelineList');
        const bibleSection = document.getElementById('bibleSection');
        const bibleContent = document.getElementById('bibleContent');

        function resizeCanvas() {
            const rect = container.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
        }
        
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Coordenadas atualizadas para o SVG melhorado
        const locations = {
            pfc: { x: 0.44, y: 0.136, radius: 0.035 },
            amygdala: { x: 0.5, y: 0.171, radius: 0.028 },
            hippocampus: { x: 0.5, y: 0.179, radius: 0.032 },
            acc: { x: 0.5, y: 0.157, radius: 0.025 },
            thalamus: { x: 0.5, y: 0.186, radius: 0.02 },
            brainstem: { x: 0.5, y: 0.207, radius: 0.025 },
            cerebellum: { x: 0.5, y: 0.214, radius: 0.024 },
            heart: { x: 0.49, y: 0.4, radius: 0.04 },
            stomach: { x: 0.5, y: 0.5, radius: 0.055 },
            chest: { x: 0.5, y: 0.43, radius: 0.04 },
            forehead: { x: 0.5, y: 0.1, radius: 0.06 },
            arm: { x: 0.74, y: 0.43, radius: 0.035 }
        };

        // Consequ√™ncias espec√≠ficas de cada √°rea cerebral
        const brainConsequences = {
            pfc: [
                'üß† Dificuldade na tomada de decis√µes',
                'üéØ Problemas de planejamento e organiza√ß√£o',
                'üö´ Redu√ß√£o do controle inibit√≥rio',
                'üí≠ Comprometimento da mem√≥ria de trabalho',
                '‚öñÔ∏è Dificuldade em avaliar riscos e consequ√™ncias'
            ],
            amygdala: [
                'üò∞ Hipervigil√¢ncia constante',
                '‚ö° Rea√ß√µes de sobressalto exageradas',
                'üò± Ataques de p√¢nico frequentes',
                'üåô Pesadelos e dist√∫rbios do sono',
                'üîÑ Mem√≥rias traum√°ticas intrusivas'
            ],
            hippocampus: [
                'üß† Problemas de mem√≥ria de longo prazo',
                'üìö Dificuldade de aprendizagem',
                'üó∫Ô∏è Desorienta√ß√£o espacial e temporal',
                'üîó Fragmenta√ß√£o de mem√≥rias',
                'üìù Dificuldade em formar novas mem√≥rias'
            ],
            acc: [
                'üòî Dificuldade de regula√ß√£o emocional',
                'üíî Processamento alterado da dor emocional',
                'ü§ù Problemas de empatia e conex√£o social',
                '‚öñÔ∏è Conflitos internos intensos',
                'üé≠ Dificuldade em reconhecer emo√ß√µes'
            ],
            thalamus: [
                'üå°Ô∏è Desregula√ß√£o da temperatura corporal',
                'üí§ Dist√∫rbios graves do sono',
                'üéöÔ∏è Altera√ß√µes na percep√ß√£o sensorial',
                'üß† Problemas de consci√™ncia e alerta',
                '‚ö° Dificuldade de filtrar est√≠mulos'
            ],
            brainstem: [
                'üíì Arritmias card√≠acas',
                'ü´Å Problemas respirat√≥rios',
                'ü©∏ Instabilidade da press√£o arterial',
                'üå°Ô∏è Desregula√ß√£o da temperatura',
                'üò¥ Dist√∫rbios do ciclo sono-vig√≠lia'
            ],
            cerebellum: [
                'ü§∏ Problemas de coordena√ß√£o motora',
                '‚öñÔ∏è Dificuldades de equil√≠brio',
                'üéØ Comprometimento da precis√£o motora',
                'üß† Dificuldade de aprendizagem motora',
                'üó£Ô∏è Problemas na coordena√ß√£o da fala'
            ]
        };

        const traumaData = {
            rejection: { 
                color: '#ef4444', 
                text: 'Rejei√ß√£o', 
                reactions: ['üíì Taquicardia intensa', 'ü§¢ N√°usea e desconforto g√°strico', 'üò∞ Ansiedade social severa', 'ü•µ Ondas de calor'], 
                targets: ['amygdala', 'acc'],
                intensity: 85,
                explanation: 'A rejei√ß√£o ativa primariamente a am√≠gdala e o c√≥rtex cingulado anterior, desencadeando uma resposta de dor social equivalente √† dor f√≠sica. O sistema nervoso simp√°tico √© hiperativado, preparando o corpo para uma resposta de luta ou fuga mesmo em situa√ß√µes sociais.',
                timeline: {
                    immediate: ['üíî Dor emocional intensa', 'üò∞ Ansiedade aguda', 'üíì Palpita√ß√µes', 'ü§¢ N√°usea'],
                    short: ['üòî Baixa autoestima', 'üö´ Evita√ß√£o social', 'üò¥ Dist√∫rbios do sono', 'üçΩÔ∏è Altera√ß√µes no apetite'],
                    long: ['üß† Depress√£o cr√¥nica', 'ü§ù Dificuldades de relacionamento', 'üò± Fobia social', 'üíä Depend√™ncia emocional']
                },
                bible: {
                    verse: '"Porque eu bem sei os pensamentos que tenho a vosso respeito, diz o Senhor; pensamentos de paz e n√£o de mal, para vos dar o fim que esperais." - Jeremias 29:11',
                    comfort: 'Deus nunca nos rejeita. Mesmo quando outros nos rejeitam, Ele nos aceita completamente e tem planos de esperan√ßa para n√≥s.',
                    hope: 'A rejei√ß√£o humana n√£o define nosso valor. Em Cristo, somos aceitos, amados e escolhidos para um prop√≥sito eterno.'
                }
            },
            abandonment: { 
                color: '#3b82f6', 
                text: 'Abandono', 
                reactions: ['üíî Palpita√ß√µes severas', 'üí¶ Sudorese profusa', 'üò± Ataques de p√¢nico', 'üåÄ Vertigem'], 
                targets: ['amygdala', 'hippocampus'],
                intensity: 90,
                explanation: 'O abandono dispara nossa resposta de apego primitiva, ativando intensamente a am√≠gdala e afetando a consolida√ß√£o de mem√≥rias no hipocampo. Esta combina√ß√£o cria um estado de alerta constante e pode fragmentar a forma√ß√£o de mem√≥rias, levando a flashbacks e reviv√™ncias traum√°ticas.',
                timeline: {
                    immediate: ['üò± P√¢nico extremo', 'üíî Sensa√ß√£o de vazio', 'üåÄ Desorienta√ß√£o', 'üò∞ Medo intenso'],
                    short: ['üòî Tristeza profunda', 'üîç Busca desesperada', 'üò¥ Ins√¥nia', 'üçΩÔ∏è Perda de apetite'],
                    long: ['üß† Transtorno de apego', 'üò± Medo de abandono', 'ü§ù Depend√™ncia emocional', 'üíä Depress√£o maior']
                },
                bible: {
                    verse: '"N√£o te deixarei nem te desampararei." - Hebreus 13:5',
                    comfort: 'Deus promete nunca nos abandonar. Mesmo quando pessoas importantes saem de nossas vidas, Ele permanece fiel.',
                    hope: 'O abandono humano √© tempor√°rio, mas o amor de Deus √© eterno. Ele est√° sempre presente, mesmo nos momentos mais solit√°rios.'
                }
            },
            humiliation: { 
                color: '#a855f7', 
                text: 'Humilha√ß√£o', 
                reactions: ['ü©∏ Hipertens√£o aguda', 'ü§Æ Enjoo severo', 'üò≥ Rubor facial', 'ü•∂ Tremores'], 
                targets: ['hippocampus', 'pfc'],
                intensity: 80,
                explanation: 'A humilha√ß√£o afeta profundamente o hipocampo (mem√≥ria autobiogr√°fica) e sobrecarrega o c√≥rtex pr√©-frontal, comprometendo a autorregula√ß√£o emocional. Esta combina√ß√£o resulta em mem√≥rias dolorosas persistentes e dificuldade em processar racionalmente a experi√™ncia traum√°tica.',
                timeline: {
                    immediate: ['üò≥ Vergonha intensa', 'üî• Rubor facial', 'ü§Æ N√°usea', 'ü•∂ Tremores'],
                    short: ['üòî Autoestima baixa', 'üö´ Isolamento social', 'üò∞ Ansiedade social', 'üí≠ Rumina√ß√£o'],
                    long: ['üß† Complexo de inferioridade', 'üò± Fobia social', 'üíä Depress√£o', 'ü§ù Dificuldades interpessoais']
                },
                bible: {
                    verse: '"Porque a minha honra vem de Deus, que √© o meu Salvador." - Salmos 62:7',
                    comfort: 'Nossa dignidade n√£o vem da aprova√ß√£o humana, mas de sermos filhos de Deus. Ele nos honra mesmo quando outros nos humilham.',
                    hope: 'A humilha√ß√£o √© passageira, mas nossa identidade em Cristo √© eterna. Somos preciosos aos olhos de Deus.'
                }
            },
            guilt: { 
                color: '#f59e0b', 
                text: 'Culpa', 
                reactions: ['üò£ Opress√£o tor√°cica', 'ü•∂ Calafrios', 'üîÑ Rumina√ß√£o obsessiva', 'üò¥ Fadiga extrema'], 
                targets: ['pfc', 'acc'],
                intensity: 75,
                explanation: 'A culpa sobrecarrega o c√≥rtex pr√©-frontal e o c√≥rtex cingulado anterior, criando loops de autocr√≠tica que drenam recursos cognitivos. Esta ativa√ß√£o excessiva leva √† rumina√ß√£o constante e compromete a capacidade de tomar decis√µes equilibradas e processar emo√ß√µes de forma saud√°vel.',
                timeline: {
                    immediate: ['üò£ Peso no peito', 'üí≠ Pensamentos obsessivos', 'üò∞ Ansiedade', 'ü•∂ Calafrios'],
                    short: ['üòî Autopuni√ß√£o', 'üîÑ Rumina√ß√£o constante', 'üò¥ Fadiga mental', 'üö´ Evita√ß√£o'],
                    long: ['üß† Depress√£o cr√¥nica', 'üíä Transtorno obsessivo', 'ü§ù Autossabotagem', 'üò± Ansiedade generalizada']
                },
                bible: {
                    verse: '"Se confessarmos os nossos pecados, ele √© fiel e justo para nos perdoar os pecados e nos purificar de toda injusti√ßa." - 1 Jo√£o 1:9',
                    comfort: 'Deus oferece perd√£o completo. A culpa n√£o precisa nos dominar quando buscamos o perd√£o divino.',
                    hope: 'Em Cristo, somos libertos da condena√ß√£o. O perd√£o de Deus √© maior que qualquer culpa que carregamos.'
                }
            },
            anxiety: { 
                color: '#10b981', 
                text: 'Ansiedade', 
                reactions: ['‚ö° Hipervigil√¢ncia', 'üí® Hiperventila√ß√£o', 'ü§≤ Tremor nas m√£os', 'üëÅÔ∏è Midr√≠ase (pupilas dilatadas)'], 
                targets: ['amygdala', 'brainstem'],
                intensity: 70,
                explanation: 'A ansiedade ativa o sistema de alarme da am√≠gdala e o tronco cerebral, preparando o corpo para resposta de luta ou fuga mesmo sem amea√ßa real. Esta ativa√ß√£o cr√¥nica pode levar √† desregula√ß√£o de fun√ß√µes vitais b√°sicas como respira√ß√£o, frequ√™ncia card√≠aca e press√£o arterial.',
                timeline: {
                    immediate: ['‚ö° Alerta extremo', 'üí® Respira√ß√£o r√°pida', 'üíì Taquicardia', 'ü§≤ Tremores'],
                    short: ['üò∞ Preocupa√ß√£o constante', 'üò¥ Ins√¥nia', 'üçΩÔ∏è Problemas digestivos', 'üí≠ Pensamentos catastr√≥ficos'],
                    long: ['üß† Transtorno de ansiedade', 'üíä Ataques de p√¢nico', 'ü§ù Evita√ß√£o social', 'üò± Agorafobia']
                },
                bible: {
                    verse: '"N√£o andeis ansiosos por coisa alguma; antes, em tudo, sejam conhecidas, diante de Deus, as vossas peti√ß√µes, pela ora√ß√£o e pela s√∫plica, com a√ß√µes de gra√ßas." - Filipenses 4:6',
                    comfort: 'Deus nos convida a entregar nossas ansiedades a Ele. N√£o precisamos carregar sozinhos o peso das preocupa√ß√µes.',
                    hope: 'A paz de Deus, que excede todo entendimento, pode guardar nossos cora√ß√µes e mentes em Cristo Jesus.'
                }
            },
            depression: { 
                color: '#6366f1', 
                text: 'Depress√£o', 
                reactions: ['üò¥ Letargia profunda', 'üçΩÔ∏è Perda de apetite', 'üí§ Dist√∫rbios do sono', 'üß† N√©voa mental'], 
                targets: ['pfc', 'hippocampus', 'thalamus'],
                intensity: 85,
                explanation: 'A depress√£o envolve disfun√ß√£o em m√∫ltiplas √°reas: c√≥rtex pr√©-frontal (tomada de decis√£o), hipocampo (mem√≥ria) e t√°lamo (regula√ß√£o do humor). Esta tr√≠ade afetada resulta em comprometimento cognitivo generalizado, problemas de mem√≥ria e desregula√ß√£o dos ritmos circadianos.',
                timeline: {
                    immediate: ['üòî Tristeza profunda', 'üò¥ Fadiga extrema', 'üß† Confus√£o mental', 'üí§ Sonol√™ncia'],
                    short: ['üçΩÔ∏è Perda de apetite', 'üò¥ Ins√¥nia ou hipersonia', 'üö´ Perda de interesse', 'üí≠ Pensamentos negativos'],
                    long: ['üß† Depress√£o maior', 'üíä Idea√ß√£o suicida', 'ü§ù Isolamento social', 'üò± Desesperan√ßa cr√¥nica']
                },
                bible: {
                    verse: '"Vinde a mim, todos os que estais cansados e sobrecarregados, e eu vos aliviarei." - Mateus 11:28',
                    comfort: 'Jesus oferece descanso para nossas almas cansadas. Ele compreende nossa dor e oferece al√≠vio.',
                    hope: 'Mesmo na escurid√£o da depress√£o, a luz de Cristo pode penetrar. H√° esperan√ßa e cura em Seu amor.'
                }
            },
            anger: { 
                color: '#ea580c', 
                text: 'Raiva', 
                reactions: ['üî• Aumento da temperatura corporal', 'üëä Tens√£o muscular', 'ü©∏ Press√£o arterial elevada', '‚ö° Energia explosiva'], 
                targets: ['amygdala', 'brainstem'],
                intensity: 95,
                explanation: 'A raiva ativa intensamente a am√≠gdala e o tronco cerebral, liberando adrenalina e preparando o corpo para confronto f√≠sico. Esta ativa√ß√£o extrema pode comprometer o controle inibit√≥rio e levar a comportamentos impulsivos, al√©m de sobrecarregar o sistema cardiovascular.',
                timeline: {
                    immediate: ['üî• Calor intenso', 'üëä Tens√£o muscular', 'ü©∏ Press√£o alta', '‚ö° Impulsos agressivos'],
                    short: ['üò° Irritabilidade constante', 'üí≠ Pensamentos vingativos', 'ü§ù Conflitos relacionais', 'üò¥ Dist√∫rbios do sono'],
                    long: ['üß† Transtorno explosivo', 'üíä Problemas cardiovasculares', 'ü§ù Isolamento social', 'üò± Comportamento violento']
                },
                bible: {
                    verse: '"Irai-vos e n√£o pequeis; n√£o se ponha o sol sobre a vossa ira." - Ef√©sios 4:26',
                    comfort: 'Deus entende nossa raiva, mas nos ensina a process√°-la de forma saud√°vel, sem pecar.',
                    hope: 'O Esp√≠rito Santo pode nos dar autocontrole e transformar nossa raiva em energia para o bem.'
                }
            },
            fear: { 
                color: '#ec4899', 
                text: 'Medo', 
                reactions: ['üèÉ Impulso de fuga', '‚ùÑÔ∏è Paralisia tempor√°ria', 'üëÄ Vis√£o em t√∫nel', 'üíì Palpita√ß√µes extremas'], 
                targets: ['amygdala', 'brainstem', 'cerebellum'],
                intensity: 88,
                explanation: 'O medo ativa o circuito am√≠gdala-tronco cerebral-cerebelo, preparando respostas motoras r√°pidas de sobreviv√™ncia. Esta ativa√ß√£o pode resultar em paralisia tempor√°ria ou hiperativa√ß√£o motora, comprometendo a coordena√ß√£o e o equil√≠brio em situa√ß√µes de estresse.',
                timeline: {
                    immediate: ['üò± Terror intenso', 'üèÉ Impulso de fuga', 'üíì Palpita√ß√µes', '‚ùÑÔ∏è Paralisia'],
                    short: ['üò∞ Ansiedade persistente', 'üö´ Evita√ß√£o', 'üò¥ Pesadelos', 'üí≠ Pensamentos catastr√≥ficos'],
                    long: ['üß† Transtorno de estresse p√≥s-traum√°tico', 'üò± Fobias espec√≠ficas', 'üíä Ataques de p√¢nico', 'ü§ù Agorafobia']
                },
                bible: {
                    verse: '"N√£o temas, porque eu sou contigo; n√£o te assombres, porque eu sou o teu Deus; eu te fortale√ßo, e te ajudo, e te sustento com a minha destra fiel." - Isa√≠as 41:10',
                    comfort: 'Deus est√° conosco em todos os momentos de medo. Sua presen√ßa nos fortalece e nos d√° coragem.',
                    hope: 'O amor perfeito de Deus lan√ßa fora o medo. Em Sua presen√ßa, encontramos seguran√ßa e paz.'
                }
            },
            complex: { 
                color: '#6b7280', 
                text: 'Trauma Complexo', 
                reactions: ['üåÄ Dissocia√ß√£o', 'üîÑ Flashbacks', 'üòµ Despersonaliza√ß√£o', '‚ö° Hiperativa√ß√£o cr√¥nica'], 
                targets: ['amygdala', 'hippocampus', 'pfc', 'brainstem'],
                intensity: 100,
                explanation: 'O trauma complexo afeta m√∫ltiplos sistemas cerebrais simultaneamente, causando desregula√ß√£o generalizada e fragmenta√ß√£o da experi√™ncia consciente. Esta ativa√ß√£o sist√™mica resulta em sintomas dissociativos, problemas de identidade e desregula√ß√£o emocional severa que afeta todas as √°reas da vida.',
                timeline: {
                    immediate: ['üåÄ Dissocia√ß√£o severa', 'üîÑ Flashbacks intensos', 'üòµ Despersonaliza√ß√£o', '‚ö° Hiperativa√ß√£o'],
                    short: ['üß† Fragmenta√ß√£o da mem√≥ria', 'üò± Pesadelos recorrentes', 'ü§ù Dificuldades relacionais', 'üí≠ Confus√£o de identidade'],
                    long: ['üß† Transtorno dissociativo', 'üíä TEPT complexo', 'ü§ù Transtorno de personalidade', 'üò± Idea√ß√£o suicida cr√¥nica']
                },
                bible: {
                    verse: '"Ele sara os quebrantados de cora√ß√£o e liga as suas feridas." - Salmos 147:3',
                    comfort: 'Deus √© especialista em curar cora√ß√µes quebrantados. N√£o h√° trauma complexo demais para Seu poder restaurador.',
                    hope: 'Mesmo nas feridas mais profundas, Deus pode trazer cura completa. Ele faz todas as coisas novas.'
                }
            }
        };

        let particles = [];
        let state = {
            type: 'idle',
            pulse: 0,
            shockwave: 0,
            activeReactions: [],
            currentIntensity: 0,
            targetIntensity: 0
        };

        function triggerTrauma(type) {
            if (state.type !== 'idle') return;
            
            const data = traumaData[type];
            state.type = type;
            state.activeReactions = data.reactions;
            state.targetIntensity = data.intensity;
            
            // Atualizar textos
            explanationText.textContent = data.explanation;
            showReactions(data.reactions);
            updateBrainLegend(data.targets);
            showConsequences(data.targets);
            showTimeline(data.timeline);
            showBibleSupport(data.bible);

            // Criar part√≠culas para cada regi√£o alvo
            data.targets.forEach((target, index) => {
                setTimeout(() => {
                    highlightBrainRegion(target);
                    createParticlesForTarget(target, data.color);
                }, index * 300);
            });
        }

        function showConsequences(activeRegions) {
            consequencesList.innerHTML = '';
            
            if (activeRegions.length > 0) {
                consequencesSection.style.display = 'block';
                
                activeRegions.forEach(region => {
                    if (brainConsequences[region]) {
                        const regionTitle = document.createElement('h5');
                        regionTitle.className = 'text-red-200 font-bold mb-2 text-sm';
                        regionTitle.textContent = getRegionName(region);
                        consequencesList.appendChild(regionTitle);
                        
                        brainConsequences[region].forEach(consequence => {
                            const item = document.createElement('div');
                            item.className = 'consequence-item';
                            item.innerHTML = `<span class="text-red-300 text-xs">${consequence}</span>`;
                            consequencesList.appendChild(item);
                        });
                    }
                });
            } else {
                consequencesSection.style.display = 'none';
            }
        }

        function showTimeline(timeline) {
            timelineList.innerHTML = '';
            timelineSection.style.display = 'block';
            
            // Consequ√™ncias Imediatas
            const immediateDiv = document.createElement('div');
            immediateDiv.className = 'timeline-item timeline-immediate';
            immediateDiv.innerHTML = `
                <h5 class="text-red-300 font-bold mb-2 text-sm">üö® Consequ√™ncias Imediatas (0-24h)</h5>
                ${timeline.immediate.map(item => `<div class="text-red-200 text-xs mb-1">${item}</div>`).join('')}
            `;
            timelineList.appendChild(immediateDiv);
            
            // Consequ√™ncias de Curto Prazo
            const shortDiv = document.createElement('div');
            shortDiv.className = 'timeline-item timeline-short';
            shortDiv.innerHTML = `
                <h5 class="text-yellow-300 font-bold mb-2 text-sm">‚è∞ Consequ√™ncias de Curto Prazo (1 semana - 3 meses)</h5>
                ${timeline.short.map(item => `<div class="text-yellow-200 text-xs mb-1">${item}</div>`).join('')}
            `;
            timelineList.appendChild(shortDiv);
            
            // Consequ√™ncias de Longo Prazo
            const longDiv = document.createElement('div');
            longDiv.className = 'timeline-item timeline-long';
            longDiv.innerHTML = `
                <h5 class="text-purple-300 font-bold mb-2 text-sm">üìÖ Consequ√™ncias de Longo Prazo (6 meses+)</h5>
                ${timeline.long.map(item => `<div class="text-purple-200 text-xs mb-1">${item}</div>`).join('')}
            `;
            timelineList.appendChild(longDiv);
        }

        function showBibleSupport(bible) {
            bibleContent.innerHTML = '';
            bibleSection.style.display = 'block';
            
            // Vers√≠culo
            const verseDiv = document.createElement('div');
            verseDiv.className = 'bible-verse';
            verseDiv.innerHTML = `<div class="text-green-200 text-sm">${bible.verse}</div>`;
            bibleContent.appendChild(verseDiv);
            
            // Conforto
            const comfortDiv = document.createElement('div');
            comfortDiv.className = 'mb-3';
            comfortDiv.innerHTML = `
                <h6 class="text-green-300 font-bold mb-1 text-sm">üíù Conforto:</h6>
                <div class="text-green-200 text-xs">${bible.comfort}</div>
            `;
            bibleContent.appendChild(comfortDiv);
            
            // Esperan√ßa
            const hopeDiv = document.createElement('div');
            hopeDiv.innerHTML = `
                <h6 class="text-green-300 font-bold mb-1 text-sm">üåü Esperan√ßa:</h6>
                <div class="text-green-200 text-xs">${bible.hope}</div>
            `;
            bibleContent.appendChild(hopeDiv);
        }

        function getRegionName(region) {
            const names = {
                pfc: 'C√≥rtex Pr√©-frontal',
                amygdala: 'Am√≠gdala',
                hippocampus: 'Hipocampo',
                acc: 'C√≥rtex Cingulado Anterior',
                thalamus: 'T√°lamo',
                brainstem: 'Tronco Cerebral',
                cerebellum: 'Cerebelo'
            };
            return names[region] || region;
        }

        function createParticlesForTarget(target, color) {
            const location = locations[target];
            if (!location) return;

            const targetX = location.x * canvas.width;
            const targetY = location.y * canvas.height;

            for (let i = 0; i < 60; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 4 + 1,
                    speed: Math.random() * 5 + 2,
                    color: color,
                    target: { x: targetX, y: targetY },
                    life: 1.0,
                    decay: 0.008
                });
            }
        }
        
        function highlightBrainRegion(region) {
            const elements = document.querySelectorAll(`[data-region="${region}"]`);
            elements.forEach(element => {
                element.classList.add('highlighted');
            });
        }

        function updateBrainLegend(activeRegions) {
            const legendItems = brainLegend.querySelectorAll('.brain-legend-item');
            legendItems.forEach(item => {
                item.classList.remove('active');
                const region = item.getAttribute('data-region');
                if (activeRegions.includes(region)) {
                    item.classList.add('active');
                }
            });
        }
        
        function showReactions(reactions) {
            reactionsPanel.innerHTML = '';
            reactions.forEach((reaction, index) => {
                const item = document.createElement('div');
                item.className = 'reaction-item text-gray-300';
                item.textContent = reaction;
                reactionsPanel.appendChild(item);
                setTimeout(() => item.classList.add('visible'), index * 250);
            });
        }

        function updateIntensity() {
            if (state.currentIntensity < state.targetIntensity) {
                state.currentIntensity += 2;
            } else if (state.currentIntensity > state.targetIntensity) {
                state.currentIntensity -= 1;
            }

            traumaIntensity.style.width = `${state.currentIntensity}%`;
            
            let level = 'Baixo';
            if (state.currentIntensity > 30) level = 'Moderado';
            if (state.currentIntensity > 60) level = 'Alto';
            if (state.currentIntensity > 85) level = 'Severo';
            
            intensityText.textContent = `N√≠vel: ${state.currentIntensity}% - ${level}`;
        }

        function update() {
            updateIntensity();
            
            if (state.type !== 'idle') {
                state.pulse += 0.06;
                
                if (particles.length < 30 && state.shockwave < 1) {
                    state.shockwave += 0.012;
                }
            }

            // Atualizar part√≠culas
            particles = particles.filter((p) => {
                const dx = p.target.x - p.x;
                const dy = p.target.y - p.y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                
                if (dist < 20) {
                    return false;
                } else {
                    p.x += (dx / dist) * p.speed;
                    p.y += (dy / dist) * p.speed;
                    p.life -= p.decay;
                    return p.life > 0;
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Desenhar part√≠culas com efeito de brilho
            particles.forEach(p => {
                ctx.save();
                ctx.globalAlpha = p.life * 0.9;
                
                // Brilho
                ctx.shadowColor = p.color;
                ctx.shadowBlur = 15;
                
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = p.color;
                ctx.fill();
                ctx.restore();
            });

            if (state.type !== 'idle') {
                const data = traumaData[state.type];
                
                // Desenhar ondas de choque para cada regi√£o ativa
                if (state.shockwave > 0 && state.shockwave < 1) {
                    data.targets.forEach(target => {
                        const location = locations[target];
                        if (location) {
                            const x = location.x * canvas.width;
                            const y = location.y * canvas.height;
                            const maxRadius = location.radius * canvas.width * 12;
                            
                            ctx.save();
                            ctx.beginPath();
                            ctx.arc(x, y, maxRadius * state.shockwave, 0, Math.PI * 2);
                            ctx.strokeStyle = data.color;
                            ctx.lineWidth = 5 * (1 - state.shockwave);
                            ctx.globalAlpha = (1 - state.shockwave) * 0.7;
                            ctx.stroke();
                            ctx.restore();
                        }
                    });
                }

                // Desenhar efeitos fisiol√≥gicos
                state.activeReactions.forEach(reaction => {
                    if (reaction.includes('card√≠aco') || reaction.includes('Palpita√ß√µes') || reaction.includes('Taquicardia')) {
                        drawHeartEffect();
                    }
                    if (reaction.includes('Sudorese') || reaction.includes('Suor')) {
                        drawSweatEffect();
                    }
                    if (reaction.includes('press√£o') || reaction.includes('Hipertens√£o')) {
                        drawBloodPressureEffect();
                    }
                    if (reaction.includes('est√¥mago') || reaction.includes('N√°usea') || reaction.includes('g√°strico')) {
                        drawStomachEffect();
                    }
                    if (reaction.includes('Tremor') || reaction.includes('Tremores')) {
                        drawTremorEffect();
                    }
                });
            }
        }
        
        function drawHeartEffect() {
            const loc = locations.heart;
            const x = loc.x * canvas.width;
            const y = loc.y * canvas.height;
            const baseRadius = loc.radius * canvas.width;
            const radius = baseRadius + Math.sin(state.pulse * 4) * 12;
            
            ctx.save();
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            const alpha = 0.5 + Math.sin(state.pulse * 4) * 0.3;
            ctx.fillStyle = `rgba(239, 68, 68, ${alpha})`;
            ctx.shadowColor = '#ef4444';
            ctx.shadowBlur = 20;
            ctx.fill();
            ctx.restore();
        }

        function drawSweatEffect() {
            const loc = locations.forehead;
            const baseX = loc.x * canvas.width;
            const baseY = loc.y * canvas.height;
            
            for(let i = 0; i < 8; i++) {
                const x = baseX + (Math.random() - 0.5) * 60;
                const y = baseY + Math.random() * 30;
                const size = Math.random() * 4 + 2;
                
                ctx.save();
                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(59, 130, 246, ${0.7 + Math.random() * 0.3})`;
                ctx.shadowColor = '#3b82f6';
                ctx.shadowBlur = 8;
                ctx.fill();
                ctx.restore();
            }
        }
        
        function drawBloodPressureEffect() {
            const loc = locations.arm;
            const x = loc.x * canvas.width;
            const y = loc.y * canvas.height;
            const pressure = (Math.sin(state.pulse * 3) + 1) / 2;
            
            ctx.save();
            ctx.strokeStyle = '#a855f7';
            ctx.lineWidth = 4;
            ctx.shadowColor = '#a855f7';
            ctx.shadowBlur = 10;
            ctx.strokeRect(x - 30, y - 10, 60, 20);
            
            ctx.fillStyle = '#a855f7';
            ctx.fillRect(x - 28, y - 8, 56 * pressure, 16);
            
            ctx.fillStyle = '#ffffff';
            ctx.font = 'bold 12px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('PA ‚Üë', x, y - 18);
            ctx.restore();
        }

        function drawStomachEffect() {
            const loc = locations.stomach;
            const x = loc.x * canvas.width;
            const y = loc.y * canvas.height;
            const radius = loc.radius * canvas.width;
            
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(state.pulse * 0.4);
            
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 5;
            ctx.shadowColor = '#f59e0b';
            ctx.shadowBlur = 15;
            ctx.beginPath();
            for(let i = 0; i < Math.PI * 6; i += 0.1) {
                const r = (i / (Math.PI * 6)) * radius;
                const px = Math.cos(i) * r;
                const py = Math.sin(i) * r;
                if(i === 0) ctx.moveTo(px, py);
                else ctx.lineTo(px, py);
            }
            ctx.stroke();
            ctx.restore();
        }

        function drawTremorEffect() {
            const loc = locations.arm;
            const x = loc.x * canvas.width;
            const y = loc.y * canvas.height;
            
            ctx.save();
            ctx.strokeStyle = '#ec4899';
            ctx.lineWidth = 3;
            ctx.shadowColor = '#ec4899';
            ctx.shadowBlur = 10;
            
            for(let i = 0; i < 5; i++) {
                const offsetX = Math.sin(state.pulse * 8 + i) * 8;
                const offsetY = Math.cos(state.pulse * 8 + i) * 8;
                ctx.beginPath();
                ctx.arc(x + offsetX, y + offsetY, 3, 0, Math.PI * 2);
                ctx.stroke();
            }
            ctx.restore();
        }

        function animate() {
            update();
            draw();
            requestAnimationFrame(animate);
        }

        function reset() {
            state.type = 'idle';
            state.pulse = 0;
            state.shockwave = 0;
            state.targetIntensity = 0;
            particles = [];
            state.activeReactions = [];
            
            explanationText.textContent = 'O sistema nervoso est√° em homeostase. Selecione um tipo de trauma para observar como diferentes regi√µes cerebrais respondem e quais rea√ß√µes fisiol√≥gicas s√£o desencadeadas.';
            reactionsPanel.innerHTML = '<p class="text-gray-400">Aguardando simula√ß√£o...</p>';
            consequencesSection.style.display = 'none';
            timelineSection.style.display = 'none';
            bibleSection.style.display = 'none';
            
            // Remover destaques
            document.querySelectorAll('.highlighted').forEach(el => {
                el.classList.remove('highlighted');
            });
            
            // Resetar legenda
            document.querySelectorAll('.brain-legend-item').forEach(item => {
                item.classList.remove('active');
            });
        }

        // Event listeners
        document.querySelectorAll('.control-btn[data-trauma]').forEach(btn => {
            btn.addEventListener('click', () => {
                const traumaType = btn.dataset.trauma;
                triggerTrauma(traumaType);
                
                btn.classList.add('glow-effect');
                setTimeout(() => btn.classList.remove('glow-effect'), 1500);
            });
        });
        
        document.getElementById('resetBtn').addEventListener('click', reset);
        
        // Iniciar anima√ß√£o
        animate();
    </script>
</body>
</html>

